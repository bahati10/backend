function cov_zj3rdmvop(){var path="/home/bahati/html/my-brand/node-mongo-tutorial/controllers/authController.js";var hash="9a15e0bb947e2c1d2494503d74751258f3b69282";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/bahati/html/my-brand/node-mongo-tutorial/controllers/authController.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:32}},"1":{start:{line:2,column:15},end:{line:2,column:41}},"2":{start:{line:3,column:12},end:{line:3,column:35}},"3":{start:{line:6,column:8},end:{line:28,column:9}},"4":{start:{line:7,column:40},end:{line:7,column:48}},"5":{start:{line:8,column:12},end:{line:10,column:13}},"6":{start:{line:9,column:16},end:{line:9,column:97}},"7":{start:{line:12,column:30},end:{line:12,column:59}},"8":{start:{line:14,column:12},end:{line:16,column:13}},"9":{start:{line:15,column:16},end:{line:15,column:85}},"10":{start:{line:18,column:28},end:{line:18,column:78}},"11":{start:{line:19,column:12},end:{line:21,column:13}},"12":{start:{line:20,column:16},end:{line:20,column:71}},"13":{start:{line:23,column:26},end:{line:23,column:101}},"14":{start:{line:24,column:12},end:{line:24,column:80}},"15":{start:{line:27,column:12},end:{line:27,column:35}},"16":{start:{line:32,column:0},end:{line:32,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:4},end:{line:5,column:5}},loc:{start:{line:5,column:33},end:{line:29,column:5}},line:5}},branchMap:{"0":{loc:{start:{line:8,column:12},end:{line:10,column:13}},type:"if",locations:[{start:{line:8,column:12},end:{line:10,column:13}},{start:{line:8,column:12},end:{line:10,column:13}}],line:8},"1":{loc:{start:{line:8,column:16},end:{line:8,column:35}},type:"binary-expr",locations:[{start:{line:8,column:16},end:{line:8,column:22}},{start:{line:8,column:26},end:{line:8,column:35}}],line:8},"2":{loc:{start:{line:14,column:12},end:{line:16,column:13}},type:"if",locations:[{start:{line:14,column:12},end:{line:16,column:13}},{start:{line:14,column:12},end:{line:16,column:13}}],line:14},"3":{loc:{start:{line:19,column:12},end:{line:21,column:13}},type:"if",locations:[{start:{line:19,column:12},end:{line:21,column:13}},{start:{line:19,column:12},end:{line:21,column:13}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9a15e0bb947e2c1d2494503d74751258f3b69282"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_zj3rdmvop=function(){return actualCoverage;};}return actualCoverage;}cov_zj3rdmvop();const bcrypt=(cov_zj3rdmvop().s[0]++,require("bcrypt"));const Admin=(cov_zj3rdmvop().s[1]++,require("../models/Admin"));const jwt=(cov_zj3rdmvop().s[2]++,require("jsonwebtoken"));class AuthController{static async login(req,res){cov_zj3rdmvop().f[0]++;cov_zj3rdmvop().s[3]++;try{const{email,password}=(cov_zj3rdmvop().s[4]++,req.body);cov_zj3rdmvop().s[5]++;if((cov_zj3rdmvop().b[1][0]++,!email)||(cov_zj3rdmvop().b[1][1]++,!password)){cov_zj3rdmvop().b[0][0]++;cov_zj3rdmvop().s[6]++;return res.status(400).json({msg:"Please add all required inputs",error:""});}else{cov_zj3rdmvop().b[0][1]++;}const doesExist=(cov_zj3rdmvop().s[7]++,await Admin.findOne({email}));cov_zj3rdmvop().s[8]++;if(!doesExist){cov_zj3rdmvop().b[2][0]++;cov_zj3rdmvop().s[9]++;return res.status(400).json({msg:"User doesn't exist",error:""});}else{cov_zj3rdmvop().b[2][1]++;}const isValid=(cov_zj3rdmvop().s[10]++,await bcrypt.compare(password,doesExist.password));cov_zj3rdmvop().s[11]++;if(!isValid){cov_zj3rdmvop().b[3][0]++;cov_zj3rdmvop().s[12]++;return res.status(400).json({error:"Invalid password"});}else{cov_zj3rdmvop().b[3][1]++;}const token=(cov_zj3rdmvop().s[13]++,jwt.sign({id:doesExist._id},process.env.TOKEN_SECRET,{expiresIn:3600}));cov_zj3rdmvop().s[14]++;return res.status(200).json({msg:"Logged in succesfully",token});}catch(error){cov_zj3rdmvop().s[15]++;throw new Error(error);}}}cov_zj3rdmvop().s[16]++;module.exports=AuthController;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHQiLCJyZXF1aXJlIiwiQWRtaW4iLCJqd3QiLCJBdXRoQ29udHJvbGxlciIsImxvZ2luIiwicmVxIiwicmVzIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwibXNnIiwiZXJyb3IiLCJkb2VzRXhpc3QiLCJmaW5kT25lIiwiaXNWYWxpZCIsImNvbXBhcmUiLCJ0b2tlbiIsInNpZ24iLCJpZCIsIl9pZCIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTl9TRUNSRVQiLCJleHBpcmVzSW4iLCJFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJhdXRoQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0XCIpO1xuY29uc3QgQWRtaW4gID0gcmVxdWlyZShcIi4uL21vZGVscy9BZG1pblwiKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5jbGFzcyBBdXRoQ29udHJvbGxlciB7XG4gICAgc3RhdGljIGFzeW5jIGxvZ2luKHJlcSwgcmVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgICAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1zZzogXCJQbGVhc2UgYWRkIGFsbCByZXF1aXJlZCBpbnB1dHNcIiwgZXJyb3I6IFwiXCIgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZG9lc0V4aXN0ID0gYXdhaXQgIEFkbWluLmZpbmRPbmUoe2VtYWlsfSk7XG5cbiAgICAgICAgICAgIGlmICghZG9lc0V4aXN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbXNnOiBcIlVzZXIgZG9lc24ndCBleGlzdFwiLCBlcnJvcjogXCJcIiB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGRvZXNFeGlzdC5wYXNzd29yZCk7XG4gICAgICAgICAgICBpZighaXNWYWxpZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtlcnJvcjpcIkludmFsaWQgcGFzc3dvcmRcIn0pXG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiBkb2VzRXhpc3QuX2lkIH0sIHByb2Nlc3MuZW52LlRPS0VOX1NFQ1JFVCx7ZXhwaXJlc0luOiAzNjAwfSlcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1zZzogXCJMb2dnZWQgaW4gc3VjY2VzZnVsbHlcIiwgdG9rZW4gfSlcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBdXRoQ29udHJvbGxlcjsiXSwibWFwcGluZ3MiOiJ3bUZBZVk7QUFBQSx5RkFmWixLQUFNQSxPQUFNLHlCQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQ2hDLEtBQU1DLE1BQUsseUJBQUlELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxFQUN6QyxLQUFNRSxJQUFHLHlCQUFHRixPQUFPLENBQUMsY0FBYyxDQUFDLEVBQ25DLEtBQU1HLGVBQWUsQ0FDakIsWUFBYUMsTUFBSyxDQUFDQyxHQUFHLENBQUVDLEdBQUcsQ0FBRSwrQ0FDekIsR0FBSSxDQUNBLEtBQU0sQ0FBRUMsS0FBSyxDQUFFQyxRQUFTLENBQUMseUJBQUdILEdBQUcsQ0FBQ0ksSUFBSSxFQUFDLHVCQUNyQyxHQUFJLDRCQUFDRixLQUFLLDhCQUFJLENBQUNDLFFBQVEsRUFBRSxrREFDckIsTUFBT0YsSUFBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxHQUFHLENBQUUsZ0NBQWdDLENBQUVDLEtBQUssQ0FBRSxFQUFHLENBQUMsQ0FBQyxDQUNyRixDQUFDLGdDQUVELEtBQU1DLFVBQVMseUJBQUcsS0FBT2IsTUFBSyxDQUFDYyxPQUFPLENBQUMsQ0FBQ1IsS0FBSyxDQUFDLENBQUMsRUFBQyx1QkFFaEQsR0FBSSxDQUFDTyxTQUFTLENBQUUsa0RBQ1osTUFBT1IsSUFBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxHQUFHLENBQUUsb0JBQW9CLENBQUVDLEtBQUssQ0FBRSxFQUFHLENBQUMsQ0FBQyxDQUN6RSxDQUFDLGdDQUVELEtBQU1HLFFBQU8sMEJBQUcsS0FBTWpCLE9BQU0sQ0FBQ2tCLE9BQU8sQ0FBQ1QsUUFBUSxDQUFFTSxTQUFTLENBQUNOLFFBQVEsQ0FBQyxFQUFDLHdCQUNuRSxHQUFHLENBQUNRLE9BQU8sQ0FBQyxtREFDUixNQUFPVixJQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUNFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQzNELENBQUMsZ0NBRUQsS0FBTUssTUFBSywwQkFBR2hCLEdBQUcsQ0FBQ2lCLElBQUksQ0FBQyxDQUFFQyxFQUFFLENBQUVOLFNBQVMsQ0FBQ08sR0FBSSxDQUFDLENBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxZQUFZLENBQUMsQ0FBQ0MsU0FBUyxDQUFFLElBQUksQ0FBQyxDQUFDLDBCQUN6RixNQUFPbkIsSUFBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxHQUFHLENBQUUsdUJBQXVCLENBQUVNLEtBQU0sQ0FBQyxDQUFDLENBRXhFLENBQUUsTUFBT0wsS0FBSyxDQUFFLHlCQUNaLEtBQU0sSUFBSWEsTUFBSyxDQUFDYixLQUFLLENBQUMsQ0FDMUIsQ0FDSixDQUNKLENBQUMsd0JBRURjLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHekIsY0FBYyJ9